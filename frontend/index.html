<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hema & Hemendra's 20th Anniversary!</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display+SC:wght@900&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #F8F4E9;
            --black: #282828;
            --grey: #4A4A4A;
            --light-grey: #D3D3D3;
            --off-white: #FAF9F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--cream);
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            padding: 20px;
            color: var(--black);
        }

        .newspaper {
            max-width: 1000px;
            margin: 0 auto;
            background-color: #fff;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border: 1px solid var(--grey);
        }

        .masthead {
            text-align: center;
            border-bottom: 2px solid var(--black);
            margin-bottom: 20px;
            padding-bottom: 20px;
            position: relative;
        }

        .masthead::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 0;
            right: 0;
            height: 1px;
            background-color: var(--black);
        }

        .newspaper-name {
            font-family: 'Playfair Display SC', 'UnifrakturMaguntia', 'Old English Text MT', serif;
            font-size: 4.5rem;
            margin-bottom: 15px;
            color: var(--black);
            text-transform: uppercase;
            letter-spacing: -1px;
            line-height: 1;
        }

        .date-volume {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--grey);
            margin-top: 10px;
        }

        .main-headline {
            font-size: 3rem;
            text-align: center;
            margin: 30px 0;
            font-weight: bold;
            color: var(--black);
            border-bottom: 1px solid var(--light-grey);
            padding-bottom: 20px;
        }

        .event-details {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            border-top: 1px solid var(--light-grey);
            border-bottom: 1px solid var(--light-grey);
            background-color: var(--off-white);
        }

        .venue {
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-style: italic;
            color: var(--black);
        }

        .date-time {
            font-size: 1.2rem;
            letter-spacing: 1px;
            color: var(--grey);
            line-height: 1.8;
        }

        .countdown-section {
            text-align: center;
            margin: 40px 0;
            padding: 20px;
            border-top: 1px solid var(--light-grey);
            border-bottom: 1px solid var(--light-grey);
            background-color: var(--off-white);
        }

        .countdown-title {
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 20px;
            color: var(--grey);
        }

        .countdown-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            /* ah */
            flex-wrap: wrap;
        }

        .countdown-item {
            background-color: #fff;
            padding: 20px;
            min-width: 100px;
            /* ah */            
            width: 22%;
            /* ah */
            text-align: center;
            border: 1px solid var(--light-grey);
            border-radius: 6px;
            /* ah */
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
        }

        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--black);
        }

        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--grey);
        }

        .columns {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two columns on larger screens */
            gap: 40px;
            margin: 40px 0;
            padding: 0 20px;
        }

        .photo-container {
            width: 100%;
            background-color: var(--off-white);
            aspect-ratio: 3/4;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            border: 1px solid var(--light-grey);
            overflow: hidden;
        }

        .photo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article {
            text-align: justify;
            font-size: 1rem;
            line-height: 1.8;
            color: var(--black);
        }

        /* .rsvp-form {
            background-color: var(--off-white);
            padding: 50px;
            border: 2px solid var(--black);
            margin: 40px 0;
        }

        .rsvp-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            font-family: 'Times New Roman', Times, serif;
            letter-spacing: 3px;
            color: var(--black);
            text-transform: uppercase;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--grey);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--light-grey);
            background-color: #fff;
            font-family: 'Times New Roman', Times, serif;
            font-size: 1rem;
            color: var(--black);
        }

        .attendance-options {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .attendance-option {
            flex: 1;
            padding: 15px 25px;
            border: 2px solid var(--black);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fff;
            color: var(--black);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .attendance-option.selected {
            background-color: var(--black);
            color: #fff;
        }

        .attendance-option:hover {
            background-color: var(--black);
            color: #fff;
        }

        .guest-counter {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .counter-btn {
            width: 50px;
            height: 50px;
            border: 2px solid var(--black);
            background-color: #fff;
            cursor: pointer;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .counter-btn:hover:not(:disabled) {
            background-color: var(--black);
            color: #fff;
        }

        .counter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .guest-count {
            font-size: 1.5rem;
            min-width: 40px;
            text-align: center;
            color: var(--black);
        }

        .submit-btn {
            background-color: var(--black);
            color: #fff;
            padding: 20px 40px;
            border: 2px solid var(--black);
            cursor: pointer;
            font-family: 'Times New Roman', Times, serif;
            text-transform: uppercase;
            letter-spacing: 3px;
            width: 100%;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            margin-top: 30px;
            font-weight: bold;
        }

        .submit-btn:hover {
            background-color: #fff;
            color: var(--black);
        }

        .response-message {
            display: none;
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--light-grey);
            background-color: var(--off-white);
        }

        @media (max-width: 768px) {
            .newspaper {
                padding: 20px;
            }
            
            .newspaper-name {
                font-size: 2.5rem;
            }
            
            .main-headline {
                font-size: 2rem;
            }
            
            .columns {
                grid-template-columns: 1fr;
            }
            
            .countdown-container {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .countdown-item {
                min-width: 80px;
            }
            
            .rsvp-form {
                padding: 30px;
            }

            .submit-btn {
                padding: 15px 30px;
                font-size: 1rem;
            }
        }
        */
        :root {
    --cream: #F8F4E9;
    --black: #282828;
    --grey: #4A4A4A;
    --light-grey: #D3D3D3;
    --off-white: #FAF9F6;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: var(--cream);
    font-family: 'Times New Roman', Times, serif;
    line-height: 1.6;
    padding: 20px;
    color: var(--black);
}

.newspaper {
    max-width: 1000px;
    margin: 0 auto;
    background-color: #fff;
    padding: 40px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    border: 1px solid var(--grey);
}

.masthead {
    text-align: center;
    border-bottom: 2px solid var(--black);
    margin-bottom: 20px;
    padding-bottom: 20px;
    position: relative;
}

.masthead::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    right: 0;
    height: 1px;
    background-color: var(--black);
}

.newspaper-name {
    font-family: 'Playfair Display SC', serif;
    font-size: 4.5rem;
    margin-bottom: 15px;
    color: var(--black);
    text-transform: uppercase;
    letter-spacing: -1px;
    line-height: 1;
}

.date-volume {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--grey);
    margin-top: 10px;
}

.main-headline {
    font-size: 3rem;
    text-align: center;
    margin: 30px 0;
    font-weight: bold;
    color: var(--black);
    border-bottom: 1px solid var(--light-grey);
    padding-bottom: 20px;
}

.event-details {
    text-align: center;
    margin: 30px 0;
    padding: 20px;
    border-top: 1px solid var(--light-grey);
    border-bottom: 1px solid var(--light-grey);
    background-color: var(--off-white);
}

.venue {
    font-size: 1.8rem;
    margin-bottom: 15px;
    font-style: italic;
    color: var(--black);
}

.date-time {
    font-size: 1.2rem;
    letter-spacing: 1px;
    color: var(--grey);
    line-height: 1.8;
}

/* Countdown Section */
.countdown-section {
    text-align: center;
    margin: 40px 0;
    padding: 20px;
    border-top: 1px solid var(--light-grey);
    border-bottom: 1px solid var(--light-grey);
    background-color: var(--off-white);
}

.countdown-title {
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 20px;
    color: var(--grey);
}

.countdown-container {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}

.countdown-item {
    background-color: #fff;
    padding: 10px;
    width: 22%;
    text-align: center;
    border: 1px solid var(--light-grey);
    border-radius: 6px;
}

.countdown-number {
    font-size: 2rem;
    font-weight: bold;
    color: var(--black);
}

.countdown-label {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--grey);
}

/* RSVP Form */
.rsvp-form {
    background-color: var(--off-white);
    padding: 30px;
    border: 2px solid var(--black);
    margin: 10px 0;
    margin: 0 auto;
}

.rsvp-title {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 20px;
    font-family: 'Times New Roman', Times, serif;
    letter-spacing: 2px;
    color: var(--black);
    text-transform: uppercase;
    font-weight: bold;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    font-weight: bold;
    font-size: 0.9rem;
    text-transform: uppercase;
    color: var(--grey);
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid var(--light-grey);
    background-color: #fff;
    font-family: 'Times New Roman', Times, serif;
    font-size: 1rem;
    color: var(--black);
}

.attendance-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 15px;
}

.attendance-option {
    padding: 12px;
    border: 2px solid var(--black);
    text-align: center;
    cursor: pointer;
    background-color: #fff;
    color: var(--black);
    font-size: 1.1rem;
    text-transform: uppercase;
}

.attendance-option.selected {
    background-color: var(--black);
    color: #fff;
}

.guest-counter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}

.counter-btn {
    width: 40px;
    height: 40px;
    border: 2px solid var(--black);
    background-color: #fff;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.submit-btn {
    background-color: var(--black);
    color: #fff;
    padding: 15px 20px;
    width: 100%;
    font-size: 1rem;
    border: 2px solid var(--black);
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
    transition: all 0.3s ease;
}

.submit-btn:hover {
    background-color: #fff;
    color: var(--black);
}

.response-message {
    display: none;
    text-align: center;
    padding: 15px;
    margin-top: 20px;
    background-color: var(--off-white);
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .newspaper {
        padding: 20px;
    }

    .newspaper-name {
        font-size: 2.5rem;
    }

    .main-headline {
        font-size: 2rem;
    }

    .rsvp-form {
        padding: 20px;
    }

    .countdown-item {
        width: 100%;
        min-width: 70px;
    }

    .guest-counter .counter-btn {
        width: 30px;
        height: 30px;
        font-size: 1.2rem;
    }
    .columns {
        grid-template-columns: 1fr; /* Change to single-column layout */
        gap: 20px;
    }
}

    </style>
</head>
<body>
    <div class="newspaper">
        <header class="masthead">
            <h1 class="newspaper-name">The Lovebird's Post</h1>
            <div class="date-volume">December 21st, 2024</div>
        </header>

        <h2 class="main-headline">CELEBRATING TWO DECADES OF LOVE</h2>

        <div class="event-details">
            <div class="venue">Villa Borghesie</div>
            <div class="date-time">Saturday, December 21st, 2024</div>
            <div class="date-time">Seven-thirty in the Evening until Eleven-thirty</div>
        </div>
        
        <div class="countdown-section">
            <h3 class="countdown-title">Countdown to the Celebration</h3>
            <div class="countdown-container">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="column">
                <div class="photo-container">
                    <img src="images/hema-hemendra.jpeg" alt="Hema and Hemendra">
                </div>
                <article class="article">
                    <p>Twenty years ago, Hema and Hemendra embarked on a beautiful journey together. Today, we celebrate their enduring love, commitment, and the beautiful family they've created. Their story is one of partnership, friendship, and unwavering devotion that continues to inspire all who know them.</p>
                </article>
            </div>
            
            <div class="column">
                <div class="article">
                    <p>Join us for an evening of celebration as we honor two decades of love, laughter, and cherished memories. Your presence will make this milestone even more special as we gather to commemorate Hema and Hemendra's remarkable journey together.</p>
                </div>
            </div>
        </div>

        <div class="rsvp-form">
            <h3 class="rsvp-title">RSVP</h3>
            <form id="rsvpForm" onsubmit="handleSubmit(event)">
                <div class="form-group">
                    <label>Will You Attend?</label>
                    <div class="attendance-options">
                        <div class="attendance-option" data-value="yes" onclick="selectAttendance(this)">Yes</div>
                        <div class="attendance-option" data-value="maybe" onclick="selectAttendance(this)">Maybe</div>
                        <div class="attendance-option" data-value="no" onclick="selectAttendance(this)">No</div>
                    </div>
                    <input type="hidden" id="attendance" name="attendance" required>
                </div>

                <div class="form-group">
                    <label>Number of Guests</label>
                    <div class="guest-counter">
                        <button type="button" class="counter-btn" onclick="updateGuestCount(-1)" id="decreaseBtn">-</button>
                        <span class="guest-count" id="guestCount">1</span>
                        <button type="button" class="counter-btn" onclick="updateGuestCount(1)">+</button>
                        <input type="hidden" id="guestsInput" name="guests" value="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" autocomplete="name" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" autocomplete="email" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" autocomplete="tel" required>
                </div>

                <div class="form-group">
                    <label for="message">Special Message for the Couple (Optional)</label>
                    <textarea id="message" name="message" rows="4"></textarea>
                </div>

                <button type="submit" class="submit-btn">Send RSVP</button>
            </form>

            <div id="responseMessage" class="response-message"></div>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'https://lovebirdspost-api.onrender.com';

        // Test backend connection on page load
        window.addEventListener('load', async () => {
            try {
                console.log('Testing backend connection...');
                const response = await fetch(`${BACKEND_URL}/api/test`);
                const data = await response.json();
                console.log('Backend connection test:', data);
            } catch (error) {
                console.error('Backend connection test failed:', error);
            }
        });

        // Countdown Timer
        const eventDate = new Date("2024-12-21T19:30:00").getTime();

        const countdown = setInterval(function() {
            const now = new Date().getTime();
            const distance = eventDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").textContent = String(days).padStart(2, '0');
            document.getElementById("hours").textContent = String(hours).padStart(2, '0');
            document.getElementById("minutes").textContent = String(minutes).padStart(2, '0');
            document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');

            if (distance < 0) {
                clearInterval(countdown);
                document.querySelectorAll(".countdown-number").forEach(el => {
                    el.textContent = "00";
                });
            }
        }, 1000);

        // Attendance selection
        function selectAttendance(element) {
        document.querySelectorAll('.attendance-option').forEach(option => {
            option.classList.remove('selected');
        });
        
        element.classList.add('selected');
        document.getElementById('attendance').value = element.dataset.value;

        const isYesOrMaybe = ['yes', 'maybe'].includes(element.dataset.value);
        document.querySelectorAll('.guest-counter button').forEach(btn => {
            btn.disabled = !isYesOrMaybe;
        });
        if (!isYesOrMaybe) {
            updateGuestCount(0, true);
        }
    }

    function updateGuestCount(change, reset = false) {
        const countDisplay = document.getElementById('guestCount');
        const guestsInput = document.getElementById('guestsInput');
        const decreaseBtn = document.getElementById('decreaseBtn');
        let currentCount = parseInt(countDisplay.textContent);

        if (reset) {
            currentCount = 1;
        } else {
            currentCount += change;
        }

        currentCount = Math.max(1, Math.min(8, currentCount));
        
        countDisplay.textContent = currentCount;
        guestsInput.value = currentCount;
        
        decreaseBtn.disabled = currentCount === 1;
    }

    async function handleSubmit(event) {
        event.preventDefault();
        console.log('Form submission started');
        
        const submitButton = document.querySelector('.submit-btn');
        submitButton.textContent = 'Sending...';
        submitButton.disabled = true;
        
        try {
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            data.dietary = []; // Add empty dietary array

            console.log('Sending data to:', `${BACKEND_URL}/api/rsvp`);
            console.log('Form data:', data);

            const response = await fetch(`${BACKEND_URL}/api/rsvp`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            console.log('Response status:', response.status);
            const result = await response.json();
            console.log('Server response:', result);

            if (!response.ok) {
                throw new Error(result.error || 'Failed to submit RSVP');
            }

            const responseMessage = document.getElementById('responseMessage');
            responseMessage.style.display = 'block';
            responseMessage.style.backgroundColor = 'var(--off-white)';
            responseMessage.innerHTML = `
                <h4 style="color: var(--black); margin-bottom: 10px; font-size: 1.2rem;">Thank you for your RSVP!</h4>
                <p style="color: var(--grey); margin-bottom: 8px;">A confirmation email will be sent to ${data.email}!</p>
                You have indicated that you ${data.attendance === 'yes' ? 'will be attending' : 'will not be attending'} with ${data.guests} guest${data.guests > 1 ? 's' : ''}.
                `;

            event.target.reset();
            document.querySelectorAll('.attendance-option').forEach(option => {
                option.classList.remove('selected');
            });
            updateGuestCount(0, true);

        } catch (error) {
            console.error('Submission error:', error);
            
            const responseMessage = document.getElementById('responseMessage');
            responseMessage.style.display = 'block';
            responseMessage.style.backgroundColor = '#fff0f0';
            responseMessage.innerHTML = `
                <h4 style="color: #cc0000; margin-bottom: 10px;">Error Submitting RSVP</h4>
                <p>Please try again later or contact Aditi directly.</p>
                <p style="color: #666; font-size: 0.8em;">${error.message}</p>
            `;
        } finally {
            submitButton.textContent = 'Send RSVP';
            submitButton.disabled = false;
        }
    }

    // Add event listeners after functions are defined
    window.addEventListener('load', async () => {
        try {
            console.log('Testing backend connection...');
            const response = await fetch(`${BACKEND_URL}/api/test`);
            const data = await response.json();
            console.log('Backend connection test:', data);
        } catch (error) {
            console.error('Backend connection test failed:', error);
        }
    });

</script>
</body>
</html>